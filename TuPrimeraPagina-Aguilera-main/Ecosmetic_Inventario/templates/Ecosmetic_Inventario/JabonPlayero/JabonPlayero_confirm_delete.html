{% extends 'base.html' %}

{% block title %}Eliminar {{ object.nombre }} - Jabón Playero - Ecosmetic Inventario{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow border-danger">
            <div class="card-header bg-danger text-white">
                <h3 class="mb-0">
                    <i class="fas fa-exclamation-triangle"></i>
                    Confirmar Eliminación
                </h3>
            </div>
            
            <div class="card-body">
                <div class="alert alert-danger">
                    <h5 class="alert-heading">
                        <i class="fas fa-warning"></i>
                        ¡Atención! Esta acción no se puede deshacer
                    </h5>
                    <p class="mb-0">
                        Estás a punto de eliminar permanentemente este jabón playero del inventario.
                    </p>
                </div>
                
                <!-- Información del producto a eliminar -->
                <div class="card bg-light">
                    <div class="card-body">
                        <h5 class="card-title text-center">
                            <i class="fas fa-umbrella-beach text-info"></i>
                            Producto a Eliminar
                        </h5>
                        
                        <div class="row">
                            <div class="col-sm-6">
                                <strong>ID:</strong> {{ object.id }}
                            </div>
                            <div class="col-sm-6">
                                <strong>Nombre:</strong> {{ object.nombre }}
                            </div>
                        </div>
                        
                        <div class="row mt-2">
                            <div class="col-sm-6">
                                <strong>Precio:</strong> ${{ object.precio }}
                            </div>
                            <div class="col-sm-6">
                                <strong>Cantidad:</strong> 
                                <span class="badge {% if object.cantidad > 10 %}bg-success{% elif object.cantidad > 5 %}bg-warning{% else %}bg-danger{% endif %}">
                                    {{ object.cantidad }} unidades
                                </span>
                            </div>
                        </div>
                        
                        <div class="row mt-2">
                            <div class="col-12">
                                <strong>Valor total en inventario:</strong> 
                                <span class="text-info fs-5">
                                    ${{ object.precio|mul:object.cantidad|floatformat:2 }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Advertencias específicas -->
                {% if object.cantidad > 0 %}
                <div class="alert alert-warning mt-3">
                    <h6 class="alert-heading">
                        <i class="fas fa-boxes"></i>
                        Producto con Stock
                    </h6>
                    <p class="mb-0">
                        Este jabón playero tiene <strong>{{ object.cantidad }} unidades</strong> en stock. 
                        Al eliminarlo, también se eliminará el registro de este inventario.
                    </p>
                </div>
                {% endif %}
                
                <div class="alert alert-info">
                    <h6 class="alert-heading">
                        <i class="fas fa-info-circle"></i>
                        ¿Qué sucederá?
                    </h6>
                    <ul class="mb-0">
                        <li>El producto se eliminará permanentemente de la base de datos</li>
                        <li>No podrás recuperar esta información posteriormente</li>
                        <li>Se actualizarán automáticamente las estadísticas del dashboard</li>
                        <li>Si hay referencias a este producto, pueden generar errores</li>
                    </ul>
                </div>
                
                <!-- Formulario de confirmación -->
                <form method="post" class="mt-4">
                    {% csrf_token %}
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                        <a href="{% url 'JabonPlayero' %}" class="btn btn-secondary btn-lg me-md-2">
                            <i class="fas fa-arrow-left"></i>
                            No, Volver a la Lista
                        </a>
                        
                        <a href="{% url 'JabonPlayero_detail' object.pk %}" class="btn btn-info btn-lg me-md-2">
                            <i class="fas fa-eye"></i>
                            Ver Detalles
                        </a>
                        
                        <button type="submit" class="btn btn-danger btn-lg" 
                                onclick="return confirm('¿Estás completamente seguro? Esta acción NO se puede deshacer.')">
                            <i class="fas fa-trash"></i>
                            Sí, Eliminar Definitivamente
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="card-footer text-center text-muted">
                <small>
                    <i class="fas fa-shield-alt"></i>
                    Una vez confirmada, esta acción no se podrá revertir
                </small>
            </div>
        </div>
        
        <!-- Alternativas -->
        <div class="alert alert-success mt-4">
            <h6 class="alert-heading">
                <i class="fas fa-lightbulb"></i>
                ¿Consideraste estas alternativas?
            </h6>
            <div class="row">
                <div class="col-md-6">
                    <ul class="mb-0">
                        <li>Editar el producto en lugar de eliminarlo</li>
                        <li>Reducir la cantidad a 0 si está descontinuado</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <ul class="mb-0">
                        <li>Cambiar el nombre si hay un error</li>
                        <li>Ajustar el precio si no es competitivo</li>
                    </ul>
                </div>
            </div>
            <div class="mt-2">
                <a href="{% url 'JabonPlayero_edit' object.pk %}" class="btn btn-success btn-sm">
                    <i class="fas fa-edit"></i>
                    Editar en su lugar
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.card.border-danger {
    border-width: 2px;
}

.card-header.bg-danger {
    background: linear-gradient(135deg, #dc3545, #c82333) !important;
}

.btn-danger:hover {
    background-color: #c82333;
    border-color: #bd2130;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
}

.alert-danger {
    border-left: 4px solid #dc3545;
}

.alert-warning {
    border-left: 4px solid #ffc107;
}

.alert-info {
    border-left: 4px solid #17a2b8;
}

.alert-success {
    border-left: 4px solid #28a745;
}

.card.bg-light {
    background-color: #f8f9fa !important;
    border: 1px solid #dee2e6;
}

@media (max-width: 768px) {
    .d-md-flex .btn {
        margin-bottom: 0.5rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Confirmación adicional para dispositivos móviles
document.addEventListener('DOMContentLoaded', function() {
    const deleteButton = document.querySelector('button[type="submit"]');
    if (deleteButton) {
        deleteButton.addEventListener('click', function(e) {
            e.preventDefault();
            
            const confirmed = confirm(
                '⚠️ ÚLTIMA CONFIRMACIÓN ⚠️\n\n' +
                'Vas a eliminar permanentemente:\n' +
                '• Jabón: {{ object.nombre }}\n' +
                '• Cantidad: {{ object.cantidad }} unidades\n' +
                '• Valor: ${{ object.precio|mul:object.cantidad|floatformat:2 }}\n\n' +
                '¿Proceder con la eliminación?'
            );
            
            if (confirmed) {
                this.form.submit();
            }
        });
    }
});
</script>
{% endblock %}
